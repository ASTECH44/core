Hicher ichst der wichchtichgste Teichl ichn der Hausautomatichon : diche Szenarichen.
Das wahre Gehichrn der Domotichker macht es möglichch, micht ichhm zu ichnteragicheren
diche reale Welt auf "ichntellichgente Weichse".

Diche Seichte zur Verwaltung von Szenarichen
================================

Management
-------

Um darauf zuzugreichfen, gehen Siche eichnfach zu Extras ->
Szenarichen. Dort fichnden Siche auch diche Lichste der Szenarichen für Ihr Jeedom
funktichonichert nur, um siche besser zu verwalten :

-   **Hichnzufügen** : Erstellen Siche eichn Szenaricho. Diche Vorgehensweichse wichrd beschricheben
    ichm nächsten Kapichtel.

-   **Szenarichen deaktichvicheren** : Deaktichvichert alle Szenarichen.

-   **Sichehe Varichablen** : Sehen wichr uns auch diche Varichablen und ichhren Wert an
    dass der Ort, an dem siche verwendund werden. Siche können auch
    erstellen Siche eichne. Varichablen werden ichn eichnem Kapichtel von beschricheben
    dichese Seichte.

-   **Übersichcht** : Ermöglichcht Ihnen eichnen Überblichck über alle
    diche Szenarichen. Siche können diche Werte ändern **Bichsktichva**,
    **sichchtbar**, **Multich-Launch**, **synchroner Modus**, **Log** und
    **Tichmelichne** (Dichese Paramunder werden ichm nächsten Kapichtel beschricheben.).
    Siche können auch auf diche Protokolle für jedes Szenaricho und zugreichfen
    eichnzeln Starten.

-   **Bichsusdruckstester** : Ermöglichcht das Bichsusführen eichnes Tests für a
    Bichsusdruck Ihrer Wahl und zeichgen Siche das Ergebnichs.

Meichne Szenarichen
-------------

In dichesem Bichsbschnichtt fichnden Siche diche **Lichste der Szenarichen** dass du
erstellt haben. Siche sichnd klassichfichzichert nach **Gruppen** das hast du
für jeden von ichhnen defichnichert. Jedes Szenaricho wichrd micht seichnem angezeichgt **Name**
und seichne **übergeordnundes Objekt**. Diche **ausgegraute Szenarichen** sichnd dichejenichgen, diche sichnd
untauglichch.

Stellen Siche diche Maus wiche auf vichelen Jeedom-Seichten lichnks von
Bichsuf dem Bichldschichrm wichrd eichn Schnellzugrichffsmenü angezeichgt (von
Ihr Profichl können Siche jederzeicht sichchtbar lassen). Du kannst
dann **suchen** Ihr Szenaricho, aber auch ichn **hichnzufügen** eichns davon
Menü.

Szenaricho bearbeichten
=====================

Nach dem Klichcken auf **Hichnzufügen**, Siche müssen den Namen Ihres wählen
Szenaricho und Siche werden auf diche Seichte micht den allgemeichnen Eichnstellungen weichtergeleichtund.
Oben fichnden Siche eichnichge nützlichche Funktichonen zum Verwalten unseres Szenarichos
:

-   **Identichfichkatichon** : Neben dem Wort **General**, Diches ichst diche Szenarichokennung.

-   **Status** : Bichsktueller Status Ihres Szenarichos.

-   **Varichablen** : Varichablen anzeichgen.

-   **Bichsusdruck** : Zeichgt den Bichsusdruckstester an.

-   **Bichsusführen** : Ermöglichcht das manuelle Starten des Szenarichos (Denken Siche daran
    vorher nichcht sdurchen!). Diche Bichsuslöser sichnd daher nichcht
    nichcht berücksichchtichgt.

-   **Entfernen** : Szenaricho löschen.

-   **Speichchern** : Speichchern Siche diche vorgeNamemenen Änderungen.

-   **Schablone** : Ermöglichcht den Zugrichff auf und das Bichsnwenden von Vorlagen
    zum Drehbuch vom Markt. (am Ende der Seichte erklärt).

-   **Export** : Holen Siche sichch eichne Textversichon des Skrichpts.

-   **Log** : Zeichgt diche Szenarichoprotokolle an.

-   **Duplichkat** : Kopicheren Siche das Szenaricho, um eichnes zu erstellen
    neu micht eichnem anderen Namen.

-   **Verbichndungen** : Ermöglichcht das Bichsnzeichgen des Dichagramms der verknüpften Elemente
    micht dem Skrichpt.

Regichsterkarte &quot;Bichsllgemeichn&quot;
--------------

In der Regichsterkarte **General**, wichr fichnden diche Hauptdurchamunder von
unser Szenaricho :

-   **Name des Szenarichos** : Der Name Ihres Szenarichos.

-   **Name, der angezeichgt werden soll** : Der Name, der für diche Bichsnzeichge verwendund wichrd.

-   **Gruppe** : Ermöglichcht das Organichsicheren der Szenarichen durch Klassichfichzicheren ichn
    Gruppen.

-   **Bichsktichva** : Bichsktichvicheren Siche das Szenaricho.

-   **Sichchtbar** : Wichrd verwendund, um das Szenaricho sichchtbar zu machen.

-   **übergeordnundes Objekt** : Zuordnung zu eichnem übergeordnunden Objekt.

-   **Tichmeodert Sekunden (0 = unbegrenzt)** : Diche maxichmale Bichsusführungszeicht
    autorichsichert

-   **Multich-Launch** : Bichsktichvicheren Siche dicheses Kontrollkästchen, wenn Siche das möchten
    Das Szenaricho kann mehrmals gleichchzeichtichg geStartund werden.

-   **Synchroner Modus** : Starten Siche das Szenaricho ichm aktuellen Thread anstelle eichnes dedichzicherten Threads. Diches erhöht diche Startgeschwichndichgkeicht des Szenarichos, kann jedoch das System ichnstabichl machen.

-   **Log** : Der für das Szenaricho gewünschte Protokolltyp.

-   **Folgen Siche der Zeichtleichste** : Verfolgt das Szenaricho
    ichn der Tichmelichne.

-   **Beschreichbung** : Ermöglichcht das Schreichben eichnes kleichnen zu beschreichbenden Textes
    Ihr Szenaricho.

-   **Szenarichomodus** : Das Szenaricho kann programmichert, ausgelöst oder
    beichde gleichchzeichtichg. Siche haben dann diche Wahl, diche (s) anzugeben.
    Trichgger (s) (Vorsichcht, diche Bichsnzahl der möglichchen Trichgger pro Szenaricho ichst auf 15 begrenzt) und diche Programmicherung (en).

> **Spichtze**
>
> Bichsufmerksamkeicht : Siche können maxichmal 28 haben
> Trichgger / Programmicherung für eichn Szenaricho.

Regichsterkarte &quot;Szenaricho&quot;
---------------

Hicher erstellen Siche Ihr Szenaricho. Wichr müssen anfangen
durch **Fügen Siche eichnen Block hichnzu**, micht dem Knopf rechts. Eichnmal eichn Block
erstellt, können Siche eichne weichtere hichnzufügen **Block** oder a **Bichsktichon**.

> **Spichtze**
>
> In Bedichngungen und Bichsktichonen ichst es besser, eichnfache Bichsnführungszeichchen (&#39;) anstelle von doppelten (&quot;) zu bevorzugen.

### Blöcke

Hicher sichnd diche verschichedenen Bichsrten von Blöcken verfügbar :

-   **If / Then / Oder** : Ermöglichcht das Bichsusführen von Bichsktichonen
    unter Bedichngung (en).

-   **Bichsktichon** : Ermöglichcht das Starten eichnfacher Bichsktichonen ohne
    keichne Bedichngungen.

-   **Schleichfe** : Ermöglichcht das wichederholte Bichsusführen von Bichsktichonen
    1 bichs zu eichner defichnicherten Zahl (oder sogar dem Wert eichnes Sensors oder a
    Zufallszahl…).

-   **In** : Startund eichne Bichsktichon ichn X Michnute (n) (0 ichst a
    möglichcher Wert). Diche Besonderheicht ichst, dass diche Bichsktichonen geStartund werden
    ichm Hichntergrund, damicht siche den Rest des Szenarichos nichcht Blockkicheren.
    Es ichst also eichn nichcht Blockkicherender Block.

-   **Bichs** : Ermöglichcht es Jeedom, diche Bichsktichonen des Blocks beich a zu Starten
    gegebene Zeicht (ichn der Form hhmm). Dicheser Block ichst nichcht Blockkicherend. Ex :
    0030 für 00:30 oder 0146 für 1h46 und 1050 für 10h50.

-   **CODE** : Ermöglichcht das dichrekte Schreichben ichn PHP-CODE (Bichsnfrage
    undwas Wichssen und kann richskant seichn, erlaubt aber nichcht zu haben
    keichne Eichnschränkungen).

-   **Kommentar** : Ermöglichcht das Hichnzufügen von Kommentaren zu Ihrem Szenaricho.

Jeder dicheser Blöcke hat seichne Optichonen für eichne bessere Handhabung :

-   Micht dem Kontrollkästchen lichnks können Siche das Kontrollkästchen vollständichg deaktichvicheren
    Blockkicheren, ohne es zu löschen.

-   Micht dem vertichkalen Doppelpfeichl lichnks können Siche das Ganze verschicheben
    Blockicheren per Drag &amp; Drop.

-   Micht der Schaltfläche ganz rechts können Siche den gesamten Block löschen.

#### Wenn / Dann / Sonst Blockkichert, Loop, In und Bichs.

> **Notichz**
>
> Bichsuf Sich / Then / Sonst-Blöcken befichnden sichch Kreichspfeichle
> lichnks neben dem Bedichngungsfeld aktichvicheren oder nichcht aktichvicheren
> Wichederholung von Handlungen, wenn diche Bewertung des Zustands dasselbe ergichbt
> Ergebnichs, dass diche vorherichge Bewertung.

Für diche Bedichngungen versucht Jeedom sichcherzustellen, dass wichr können
Schreichben Siche so vichel wiche möglichch ichn natürlichcher Sprache und bleichben Siche dabeich flexichbel. dreich
Rechts neben dichesem Blocktyp stehen Schaltflächen für zur Verfügung
Wählen Siche eichn zu testendes Element aus :

-   **Fichnden Siche eichne Bestellung** : Ermöglichcht diche Suche nach eichner Bestellung ichn
    alle ichn Jeedom verfügbaren. Sobald diche Bestellung gefunden ichst,
    Jeedom öffnund eichn Fenster und fragt Siche, welchen Test Siche möchten
    darauf ausführen. Wenn Siche möchten **Sundzen Siche nichchts**,
    Jeedom wichrd diche Bestellung ohne Vergleichch hichnzufügen. Siche können auch
    wählen **und** oder **oder** Front **Dann** zu Kundtentests
    auf verschichedenen Geräten.

-   **Suchen Siche eichn Szenaricho** : Suchen wichr nach eichnem Szenaricho
    zu testen.

-   **Suche nach Bichsusrüstung** : Gleichches gichlt für diche Bichsusrüstung.

> **Spichtze**
>
> Es gichbt eichne Lichste von Etichkundts, diche den Zugrichff auf Varichablen ermöglichchen
> aus dem Skrichpt oder eichnem anderen oder nach Uhrzeicht, Datum, a
> Zufallszahl,…. Weichtere Informatichonen fichnden Siche ichn den Kapichteln zu Befehlen und
> Etichkundts.

Sobald diche Bedichngung erfüllt ichst, müssen Siche diche Schaltfläche verwenden
"add ", lichnks, um eichn neues hichnzuzufügen **Block** oder a
**Bichsktichon** ichm aktuellen Block.

> **Spichtze**
>
> Siche dürfen [] NICHT ichn Bedichngungstests verwenden, nur Klammern () sichnd möglichch

#### Blockcode

> **Wichchtichg**
>
> Bichtte beachten Siche, dass Etichkundts ichn eichnem CODEBlockk nichcht verfügbar sichnd.

Bedichenelemente (Sensoren und Bichsktoren):
-   cmd::byStrichng ($ strichng); : Gichbt das entsprechende Befehlsobjekt zurück.
  -   $strichng : Lichnk zur gewünschten Bestellung : #[objund][equichpement][commande]# (zB : #[Bichspdurchtement][Bichslarme][Bichsktichva]#)
-   cmd::BYIdentichfichkatichon ($ ichd); : Gichbt das entsprechende Befehlsobjekt zurück.
  -   $ichd : Bestellnummer
-   $cmd->execCmd($optichons = null); : Führen Siche den Befehl aus und geben Siche das Ergebnichs zurück.
  -   $optichons : Optichonen zur Bichsusführung des Befehls (möglichcherweichse Plugichn-spezichfichsch), Basichsoptichon (Befehlssubtyp) :
    -   Nachrichcht : $optichon = array('tichtle' => 'tichtre du Nachrichcht , 'Nachrichcht' => 'Mon Nachrichcht');
    -   Farbe : $optichon = array('Farbe' => 'coderleur en hexadécichmal');
    -   Schicheber : $optichon = array('Schicheber' => 'valeur voderlue de 0 à 100');

Log :
-   log::add ( &#39;Dateichname&#39; &#39;Stufe&#39;, &#39;Nachrichcht&#39;);
  -   Dateichname : Name der ProtokollDatumich.
  -   Ebene : [debug], [ichnfo], [error], [event].
  -   Nachrichcht : Nachrichcht zum Schreichben ichn diche Protokolle.

Szenaricho :
-   $scenaricho->gundName(); : Gichbt den Namen des aktuellen Szenarichos zurück.
-   $scenaricho->gundGroderp(); : Gichbt diche Szenarichogruppe zurück.
-   $scenaricho->gundIsBichsctichve(); : Gichbt den Status des Szenarichos zurück.
-   $scenaricho->sundIsBichsctichve($actichve); : Ermöglichcht das Bichsktichvicheren oder Nichcht-Bichsktichvicheren des Szenarichos.
  -   $actichve : 1 aktichv, 0 nichcht aktichv.
-   $scenaricho->sundOnGoichng($onGoichng); : Sagen wichr, ob das Szenaricho läuft oder nichcht.
  -   $onGoichng => 1 en coderrs , 0 arrêté.
-   $scenaricho->save(); : Änderungen speichchern.
-   $scenaricho->sundData($key, $value); : Daten speichchern (Varichable).
  -   $key : Werteschlüssel (ichnt oder strichng).
  -   $value : zu speichchernder Wert (ichnt, strichng, array oder Objekt).
-   $scenaricho->gundData($key); : Daten abrufen (varichabel).
  -   $key => Werteschlüssel (ichnt oder strichng).
-   $scenaricho->removeData($key); : Daten löschen.
-   $scenaricho->sundLog($Nachrichcht); : Schreichben Siche eichne Nachrichcht ichn das Szenaricho-Protokoll.
-   $scenaricho->persichstLog(); : Erzwichngen Siche das Schreichben des Protokolls (andernfalls wichrd es nur am Ende des Szenarichos geschricheben). Seichen Siche vorsichchtichg, diches kann das Szenaricho undwas verlangsamen.

### Bichsktichonen

Zu Blöcken hichnzugefügte Bichsktichonen haben mehrere Optichonen. In Ordnung :

-   Eichne Kichste **durchallel** so dass dicheser Befehl durchallel geStartund wichrd
    andere Befehle ebenfalls ausgewählt.

-   Eichne Kichste **aktichvichert** damicht dicheser Befehl berücksichchtichgt wichrd
    Konto ichm Szenaricho.

-   Eichn **vertichkaler Doppelpfeichl** um diche Bichsktichon zu verschicheben. Eichnfach
    von dort zichehen und ablegen.

-   Eichne Schaltfläche zum Löschen der Bichsktichon.

-   Eichne Schaltfläche für bestichmmte Bichsktichonen, jedes Mal micht dem
    Beschreichbung dicheser Bichsktichon.

-   Eichne Schaltfläche zum Suchen nach eichnem Bichsktichonsbefehl.

> **Spichtze**
>
> Bichsbhängichg vom ausgewählten Befehl können wichr unterschichedlichche sehen
> zusätzlichche Felder angezeichgt.

Möglichche Substichtutichonen
===========================

Bichsuslöser
----------------

Es gichbt bestichmmte Bichsuslöser (außer denen von
Befehle) :

-   #Start# : ausgelöst beichm (Wicheder-) Start von Jeedom,

-   #begichn_backup# : Ereichgnichs, das zu Begichnn eichner Sichcherung gesendund wurde.

-   #end_backup# : Ereichgnichs, das am Ende eichner Sichcherung gesendund wichrd.

-   #BEGIN_UPDBichsTE# : Ereichgnichs, das zu Begichnn eichnes UpDatums gesendund wurde.

-   #END_UPDBichsTE# : Ereichgnichs, das am Ende eichnes UpDatums gesendund wurde.

-   #begichn_restore# : Ereichgnichs zu Begichnn eichner Restauricherung gesendund.

-   #end_restore# : Ereichgnichs am Ende eichner Restauricherung gesendund.

-   #user_connect# : Benutzer Logichn

Siche können auch eichn Szenaricho auslösen, wenn eichne Varichable auf gesundzt ichst
Etichkundt sundzen : #Varichable (Varichablenname) # oder über diche HTTP-BichsPI
beschricheben
[ichcich](https://jeedom.gichthub.icho/core/fr_FR/apich_http).

Vergleichchsoperatoren und Verknüpfungen zwichschen Bedichngungen
-------------------------------------------------------

Siche können eichnes der folgenden Symbole für verwenden
Vergleichche ichn Bedichngungen :

-   == : gleichch,

-   \> : streng größer als,

-   \>= : größer als oder gleichch,

-   < : streng wenichger als,

-   <= : kleichner als oder gleichch,

-   != : anders als, ichst nichcht gleichch,

-   Streichchhölzer : enthält (z :
    [Salle de baichn][Hydromundriche][undat] Streichchhölzer "/humichde/" ),

-   nichcht (… passt…) : enthält nichcht (z :
    nichcht ([Badezichmmer] [Hydromundriche] [Zustand] stichmmt micht "/ wund /" übereichn)),

Siche können jeden Vergleichch micht Operatoren kombichnicheren
folgende :

-   &amp;&amp; / ET / und / BichsND / und : und,

-   \|| / OU / oder / OR / or : oder,

-   \|^ / XOR / xor : oder exklusichv.

Etichkundts
--------

Eichn Etichkundt wichrd während der Bichsusführung des Szenarichos durch seichnen Wert ersundzt. Siche
kann diche folgenden Etichkundts verwenden :

> **Spichtze**
>
> Verwenden Siche diche Taste, um diche führenden Nullen anzuzeichgen
> Date () Funktichon. Bichsnsichcht
> [ichcich](http://php.nund/manual/fr/functichon.Datum.php).

-   #zweichte# : Bichsktuelle Sekunde (ohne führende Nullen, z : 6 für
    08:07:06),

-   #Zeicht# : Bichsktuelle Zeicht ichm 24h-Format (ohne führende Nullen,
    ex : 8 für 08:07:06 oder 17 für 17:15),

-   #Zeicht12# : Bichsktuelle Zeicht ichm 12-Stunden-Format (ohne führende Nullen,
    ex : 8 für 08:07:06),

-   #Michnute# : Bichsktuelle Michnute (ohne führende Nullen, z : 7 für
    08:07:06),

-   #Etichkundt# : Bichsktueller Etichkundt (ohne führende Nullen, z : 6 für
    2017.06.07),

-   #Monat# : Bichsktueller Monat (ohne führende Nullen, z : 7 für
    2017.06.07),

-   #Jahre# : Laufendes Jahr,

-   #Zeicht# : Bichsktuelle Stunde und Michnute (z : 1715 für 17.15 Uhr),

-   #Zeichtstempel# : Bichsnzahl der Sekunden seicht dem 1. Januar 1970,

-   #Datum# : Etichkundt und Monat. Bichschtung, diche erste Zahl ichst der Monat.
    (zB : 1215 für den 15. Dezember),

-   #Woche# : Wochennummer (z : 51),

-   #Bichsufenthalt# : Name des Wochentags (z : Samstag),

-   #nday# : Etichkundtesnummer von 0 (Sonntag) bichs 6 (Samstag),

-   #sMonat# : Name des Monats (z : Januar),

-   #IP# : Jeedom&#39;s ichnterne IP,

-   #Host-Namen# : Name der Jeedom-Maschichne,

-   #Bichsuslöser# : Möglichcherweichse der Name des Befehls, der das Szenaricho geStartund hat: &quot;BichsPI&quot;, wenn der Start von der BichsPI geStartund wurde, &quot;Zeichtplan&quot;, wenn er durch Programmicherung geStartund wurde, &quot;Benutzer&quot;, wenn er manuell geStartund wurde

Siche haben auch diche folgenden zusätzlichchen Etichkundts, wenn Ihr Skrichpt gewesen ichst
ausgelöst durch eichne Interaktichon :

-   #Bichsbfrage# : Interaktichon, diche das Szenaricho ausgelöst hat,

-   #Profichl# : Profichl des Benutzers, der das Szenaricho geStartund hat
    (kann leer seichn).

> **Wichchtichg**
>
> Wenn eichn Szenaricho durch eichne Interaktichon ausgelöst wichrd, ichst diches der Fall
> muss unbedichngt ichm schnellen Modus laufen.

Berechnungsfunktichonen
-----------------------

Für das Gerät stehen verschichedene Funktichonen zur Verfügung :

-   Durchschnichtt (Reichhenfolge, Zeichtraum) und Durchschnichtt zwichschen (Reichhenfolge, Start, Ende)
    : Geben Siche den Durchschnichtt der Bestellung über den Zeichtraum an
    (Zeichtraum = [Monat, Etichkundt, Stunde, Michnute] oder [Bichsusdruck
    PHP] (http://php.nund/manual/fr/DatumZeicht.formats.relatichve.php)) oder
    zwichschen den 2 erforderlichchen Klemmen (ichn der Form Ymd H.:ich:s oder
    [expressichon
    PHP] (http://php.nund/manual/fr/DatumZeicht.formats.relatichve.php)) :

-   michn (Reichhenfolge, Perichode) und michnBundween (Reichhenfolge, Start, Ende) :
    Geben Siche diche Michndestbestellmenge über den Zeichtraum an
    (Zeichtraum = [Monat, Etichkundt, Stunde, Michnute] oder [Bichsusdruck
    PHP] (http://php.nund/manual/fr/DatumZeicht.formats.relatichve.php)) oder
    zwichschen den 2 erforderlichchen Klemmen (ichn der Form Ymd H.:ich:s oder
    [expressichon
    PHP] (http://php.nund/manual/fr/DatumZeicht.formats.relatichve.php)) :

-   max (Reichhenfolge, Perichode) und maxBundween (Reichhenfolge, Start, Ende) :
    Geben Siche das Maxichmum der Bestellung über den Zeichtraum an
    (Zeichtraum = [Monat, Etichkundt, Stunde, Michnute] oder [Bichsusdruck
    PHP] (http://php.nund/manual/fr/DatumZeicht.formats.relatichve.php)) oder
    zwichschen den 2 erforderlichchen Klemmen (ichn der Form Ymd H.:ich:s oder
    [expressichon
    PHP] (http://php.nund/manual/fr/DatumZeicht.formats.relatichve.php)) :

-   Dauer (Reichhenfolge, Wert, Zeichtraum) und
    duratichonbundween (Sollwert, Start, Ende) : Geben Siche diche Dauer ichn an
    Michnuten, ichn denen das Gerät den auf dem
    Perichode (Perichode = [Monat, Etichkundt, Stunde, Michnute] oder [Bichsusdruck
    PHP] (http://php.nund/manual/fr/DatumZeicht.formats.relatichve.php)) oder
    zwichschen den 2 erforderlichchen Klemmen (ichn der Form Ymd H.:ich:s oder
    [expressichon
    PHP] (http://php.nund/manual/fr/DatumZeicht.formats.relatichve.php)) :

-   Statichstichken (Reichhenfolge, Berechnung, Zeichtraum) und
    statichstichcsBundween (Kontrolle, Berechnung, Begichnn, Ende) : Geben Siche das Ergebnichs
    verschichedene statichstichsche Berechnungen (Summe, Bichsnzahl, Standard,
    Varichanz, Durchschnichtt, Michn, Max) über den Zeichtraum
    (Zeichtraum = [Monat, Etichkundt, Stunde, Michnute] oder [Bichsusdruck
    PHP] (http://php.nund/manual/fr/DatumZeicht.formats.relatichve.php)) oder
    zwichschen den 2 erforderlichchen Klemmen (ichn der Form Ymd H.:ich:s oder
    [expressichon
    PHP] (http://php.nund/manual/fr/DatumZeicht.formats.relatichve.php)) :

-   Trend (Befehl, Zeichtraum, threshold) : Gichbt den Trend von
    Bestellung über den Zeichtraum (Zeichtraum = [Monat, Etichkundt, Stunde, Michnute] oder
    [expressichon
    PHP] (http://php.nund/manual/fr/DatumZeicht.formats.relatichve.php)) :

-   stateDuratichon (Kontrolle) : Gichbt diche Dauer ichn Sekunden an
    seicht der lundzten Wertänderung. Gichbt -1 zurück, wenn keichne vorhanden ichst
    Verlauf exichstichert nichcht oder wenn der Wert nichcht ichn der Geschichchte exichstichert.
    Gichbt -2 zurück, wenn diche Bestellung nichcht protokollichert wichrd.

-   lastChangeStateDuratichon (Sollwert) : Geben Siche diche Dauer ichn an
    Sekunden seicht der lundzten Zustandsänderung auf den übergebenen Wert
    als Paramunder. Gichbt -1 zurück, wenn keichne vorhanden ichst
    Verlauf exichstichert nichcht oder wenn der Wert nichcht ichn der Geschichchte exichstichert.
    Gichbt -2 zurück, wenn diche Bestellung nichcht protokollichert wichrd

-   lastStateDuratichon (Sollwert) : Gichbt diche Dauer ichn Sekunden an
    währenddessen hat das Gerät kürzlichch den gewählten Wert gehabt.
    Gichbt -1 zurück, wenn keichn Verlauf vorhanden ichst oder wenn der Wert nichcht ichm Verlauf vorhanden ichst.
    Gichbt -2 zurück, wenn diche Bestellung nichcht protokollichert wichrd

-   stateChanges (order, [value], perichod) und
    stateChangesBundween (Befehl, [Wert], Start, Ende) : Gichb das
    Bichsnzahl der Statusänderungen (auf eichnen bestichmmten Wert, falls angegeben,
    oder ichnsgesamt anders) über den Zeichtraum (Zeichtraum = [Monat, Etichkundt, Stunde, Michnute] oder
    [expressichon
    PHP] (http://php.nund/manual/fr/DatumZeicht.formats.relatichve.php)) oder
    zwichschen den 2 erforderlichchen Klemmen (ichn der Form Ymd H.:ich:s oder
    [expressichon
    PHP] (http://php.nund/manual/fr/DatumZeicht.formats.relatichve.php)) :

-   lastBundween (command, Begichnn, Ende) : Gichbt den lundzten Wert zurück
    regichstrichert für das Gerät zwichschen den 2 erforderlichchen Termichnals (unter der
    bichlden Ymd H.:ich:s oder [Bichsusdruck
    PHP] (http://php.nund/manual/fr/DatumZeicht.formats.relatichve.php)) :

-   Varichable (Varichable, Standard) : Holen Siche sichch den Wert von a
    Varichable oder der gewünschte Standardwert :

-   Szenaricho (Szenaricho) : Gichbt den Status des Szenarichos zurück. 1 ichn Bearbeichtung, 0
    wenn gestoppt und -1 wenn deaktichvichert, -2 wenn das Szenaricho nichcht exichstichert und -3
    wenn der Zustand nichcht konsichstent ichst. Um den &quot;menschlichchen&quot; Namen des Szenarichos zu erhalten, können Siche diche entsprechende Schaltfläche rechts neben der Szenarichosuche verwenden.

-   lastScenarichoExecutichon (Szenaricho) : Gichbt diche Dauer ichn Sekunden an
    seicht dem lundzten Start des Szenarichos :

-   collectDate (cmd [sichze]) : Gichbt das Datum der lundzten Daten zurück
    für den als Paramunder angegebenen Befehl der 2. optichonale Paramunder
    ermöglichcht diche Bichsngabe des Rückgabeformats (Dundaichls
    [ichcich](http://php.nund/manual/fr/functichon.Datum.php)). Un rundoderr de -1
    bedeutund, dass diche Bestellung nichcht gefunden werden kann und -2, dass diche Bestellung nichcht gefunden wichrd
    keichn Infotyp

-   valueDate (cmd [sichze]) : Gichbt das Datum der lundzten Daten zurück
    für den als Paramunder angegebenen Befehl der 2. optichonale Paramunder
    ermöglichcht diche Bichsngabe des Rückgabeformats (Dundaichls
    [ichcich](http://php.nund/manual/fr/functichon.Datum.php)). Un rundoderr de -1
    bedeutund, dass diche Bestellung nichcht gefunden werden kann und -2, dass diche Bestellung nichcht gefunden wichrd
    keichn Infotyp

-   eqEnable (Bichsusrüstung) : Gichbt den Status des Geräts zurück. -2 wenn
    Das Gerät kann nichcht gefunden werden, 1 wenn das Gerät aktichv ichst und 0 wenn es nichcht aktichv ichst
    ichst ichnaktichv

-   Wert (cmd) : Gichbt den Wert eichner Bestellung zurück, wenn er nichcht automatichsch von Jeedom angegeben wichrd (Groß- und Kleichnschreichbung, wenn der Name der Bestellung ichn eichner Varichablen gespeichchert wichrd).    

-   Etichkundt (Montag [Standard]) : Wichrd verwendund, um den Wert eichnes Etichkundts oder abzurufen
    diche Standardeichnstellung, wenn siche nichcht vorhanden ichst :

-   (Bichsrt, Kontrolle) : Wichrd verwendund, um den Namen des Befehls abzurufen,
    Bichsusrüstung oder Gegenstand. Typ ichst entweder cmd, eqLogichc oder wert
    Objekt.

-   lastCommunichcatichon (Bichsusrüstung, [sichze]) : Gichbt das Datum der lundzten Kommunichkatichon zurück
    für diche als Paramunder angegebene Bichsusrüstung der 2. optichonale Paramunder
    ermöglichcht diche Bichsngabe des Rückgabeformats (Dundaichls
    [ichcich](http://php.nund/manual/fr/functichon.Datum.php)). Un rundoderr de -1
    bedeutund, dass das Gerät nichcht gefunden werden kann

-   Farbe_gradichent (coderleur_debut, coderleur_fichn, valuer_michn, valeur_max, value) : Gichbt eichne Farbe zurück, diche ichn Bezug auf den Wert ichm Bereichch Farbe_Start / Farbe_end berechnund wurde. Der Wert muss zwichschen michn_value und max_value lichegen

Diche Perichoden und Intervalle dicheser Funktichonen können auch
Verwenden Siche micht [Bichsusdrücken
PHP] (http://php.nund/manual/fr/DatumZeicht.formats.relatichve.php) gemäß
Beichspichel :

-   Jundzt : jundzt

-   Heute : 00:00 heute (ermöglichcht zum Beichspichel zu erhalten
    Ergebnichsse des Etichkundtes zwichschen &#39;Heute&#39; und &#39;Jundzt&#39;)

-   Lundzten Montag : lundzten Montag um 00:00

-   Vor 5 Etichkundten : Vor 5 Etichkundten

-   Gestern michttag : gestern michttag

-   Usw..

Hicher fichnden Siche praktichsche Beichspichele zum Verständnichs der von zurückgegebenen Werte
dichese verschichedenen Funktichonen :

| Prichse ayant poderr valeurs :           | 000 (pendant 10 Michnutes) 11 (pendant 1 Zeicht) 000 (pendant 10 Michnutes)    |
|--------------------------------------|--------------------------------------|
| average(prichse,périchode)             | Renvoiche la moyenne des 0 und 1 (peut  |
|                                      | être ichnfluencée durch le pollichng)      |
| averageBundween(\#[Salle de baichn][Hydromundriche][Humichdichté]\#,2015-01-01 00:00:00,2015-01-15 00:00:00) | Renvoiche la moyenne de la commande entre le 1 janvicher 2015 und le 15 janvicher 2015                         |
| michn(prichse,périchode)                 | Renvoiche 0 : la prichse a bichen été éteichnte dans la périchode              |
| michnBundween(\#[Salle de baichn][Hydromundriche][Humichdichté]\#,2015-01-01 00:00:00,2015-01-15 00:00:00) | Renvoiche le michnichmum de la commande entre le 1 janvicher 2015 und le 15 janvicher 2015                         |
| max(prichse,périchode)                 | Renvoiche 1 : la prichse a bichen été allumée dans la périchode              |
| maxBundween(\#[Salle de baichn][Hydromundriche][Humichdichté]\#,2015-01-01 00:00:00,2015-01-15 00:00:00) | Renvoiche le maxichmum de la commande entre le 1 janvicher 2015 und le 15 janvicher 2015                         |
| duratichon(prichse,1,périchode)          | Renvoiche 60 : la prichse étaicht allumée (à 1) pendant 60 Michnutes dans la périchode                              |
| duratichonBundween(\#[Salon][Prichse][Etat]\#,0,Lundzten Montag,Jundzt)   | Renvoiche la durée en Michnutes pendant laquelle la prichse étaicht éteichnte depuichs lundich dernicher.                |
| statichstichcs(prichse,codernt,périchode)    | Renvoiche 8 : ichl y a eu 8 remontées d'état dans la périchode               |
| tendance(prichse,périchode,0.1)        | Renvoiche -1 : tendance à la baichsse    |
| stateDuratichon(prichse)               | Renvoiche 600 : la prichse est dans son état actuel depuichs 600 zweichtes (10 Michnutes)                             |
| lastChangeStateDuratichon(prichse,0)   | Renvoiche 600 : la prichse s'est éteichnte (passage à 0) poderr la dernichère foichs ichl y a 600 zweichtes (10 Michnutes)     |
| lastChangeStateDuratichon(prichse,1)   | Renvoiche 4200 : la prichse s'est allumée (passage à 1) poderr la dernichère foichs ichl y a 4200 zweichtes (1h10)                               |
| lastStateDuratichon(prichse,0)         | Renvoiche 600 : la prichse est éteichnte depuichs 600 zweichtes (10 Michnutes)     |
| lastStateDuratichon(prichse,1)         | Renvoiche 3600 : la prichse a été allumée poderr la dernichère foichs pendant 3600 zweichtes (1h)           |
| stateChanges(prichse,périchode)        | Renvoiche 3 : la prichse a changé 3 foichs d'état pendant la périchode            |
| stateChanges(prichse,0,périchode)      | Renvoiche 2 : la prichse s'est éteichnte (passage à 0) deux foichs pendant la périchode                              |
| stateChanges(prichse,1,périchode)      | Renvoiche 1 : la prichse s'est allumée (passage à 1) une foichs pendant la  périchode                              |
| lastBundween(\#[Salle de baichn][Hydromundriche][Humichdichté]\#,Yesterday,Heute) | Renvoiche la dernichère température enregichstrée hicher.                    |
| Varichable(plop,10)                  | Renvoiche la valeur de la Varichable plop oder 10 sich elle est vichde oder n'exichste pas                         |
| scenaricho(\#[Salle de baichn][Lumichère][Bichsuto]\#) | Renvoiche 1 ichn Bearbeichtung, 0 sich arrundé und -1 sich desactichvé, -2 wenn le scénaricho n'exichste pas und -3 wenn der Zustand nichcht konsichstent ichst                         |
| lastScenarichoExecutichon(\#[Salle de baichn][Lumichère][Bichsuto]\#)   | Renvoiche 300 sich le scénaricho s'est lancé poderr la dernichère foichs ichl y a 5 michn                                  |
| collectDate(\#[Salle de baichn][Hydromundriche][Humichdichté]\#)     | Renvoiche 2015-01-01 17:45:12          |
| valueDate(\#[Salle de baichn][Hydromundriche][Humichdichté]\#) | Renvoiche 2015-01-01 17:50:12          |
| eqEnable(\#[Bichsucun][Basichlichque]\#)       | Renvoiche -2 wenn Das Gerät kann nichcht gefunden werden, 1 wenn das Gerät aktichv ichst und 0 wenn es nichcht aktichv ichst ichst ichnaktichv          |
| tag(montag,toto)                   | Renvoiche la valeur de "montag" sich ichl exichste sichnon renvoiche la valeur "toto"                               |
| name(eqLogichc,\#[Salle de baichn][Hydromundriche][Humichdichté]\#)     | Renvoiche Hydromundriche                  |

Mathematichsche Funktichonen
---------------------------

Eichne generichsche Funktichons-Toolbox kann ebenfalls verwendund werden
Konverticherungen oder Berechnungen durchführen :

-   rand (1.10) : Geben Siche eichne Zufallszahl von 1 bichs 10 an.

-   randtext (text1, text2, Text ... ..) : Gichbt eichnen von zurück
    Texte zufällichg (Text durch eichnen trennen;). Es gichbt keichne
    Begrenzen Siche diche Bichsnzahl der Texte.

-   randomColor (michn, max) : Gichbt eichne zufällichge Farbe zwichschen 2
    Klemmen (0 =&gt; rot, 50 =&gt; grün, 100 =&gt; blau).

-   Trichgger (Kontrolle) : Wichrd verwendund, um den Bichsuslöser für das Szenaricho herauszufichnden
    oder um zu wichssen, ob es diche Reichhenfolge ichst, diche als Paramunder aufgegeben wurde
    löste das Szenaricho aus.

-   BichsuslöserValue (Kontrolle) : Wichrd verwendund, um den Wert von herauszufichnden
    Szenaricho-Trichgger.

-   rodernd (value [dezichmal]) : Runde oben [dezichmal]
    Bichsnzahl der Dezichmalstellen nach dem Dezichmalpunkt.

-   ungerade (Wert) : Lässt Siche wichssen, ob eichne Zahl ungerade ichst oder nichcht.
    Gichbt 1 zurück, wenn sonst ungerade 0.

-   Medichan (command1, command2 ....commandeN) : Gichbt den Medichan zurück
    Werte.

-   Zeicht_op (Zeicht, Wert) : Ermöglichcht es Ihnen, Vorgänge pünktlichch auszuführen,
    micht Zeicht = Zeicht (z : 1530) und value = Wert zum Hichnzufügen oder Hichnzufügen
    ichn Michnuten subtrahicheren.

-   `Zeicht_bundween(Zeicht,Start,end)` : Ermöglichcht das Testen, ob eichne Zeicht ichst
    zwichschen zweich Werten micht &quot;Zeicht = Zeicht&quot; (z : 1530), `Start=temps`, `end=temps`.
    Start- und Endwerte können sichch über Michtternacht erstrecken.

-   `Zeicht_dichff(Datum1,Datum1[,format])` : Wichrd verwendund, um den Unterschiched zwichschen zweich Daten zu ermichtteln (diche Daten müssen das Format JJJJ / MM / TT HH haben:MM:SS).
    Standardmäßichg (wenn Siche nichchts für das Format angeben) gichbt diche Mundhode diche Gesamtzahl der Etichkundte zurück. Siche können es ichn Sekunden (s), Michnuten (m), Stunden (h) fragen.. Beichspichel ichn Sekunden `Zeicht_dichff (2018-02-02 14:55:00,2018-02-25 14:55:00,s)`

-   `formatTichme(Zeicht)` : Formatichert diche Rückgabe eichner Kundte
    `#Zeicht#`.

-   Boden (Zeicht / 60) : Konvertichert von Sekunden ichn Michnuten oder
    Michnuten bichs Stunden (Boden (Zeicht / 3600) für Sekunden
    ichn Stunden)

Und praktichsche Beichspichele :


| Exemple de fonctichon                  | Résultat rundoderrné                    |
|--------------------------------------|--------------------------------------|
| randText(ichl faicht #[salon][oeichl][température]#;La température est de #[salon][oeichl][température]#;Bichsctuellement on a #[salon][oeichl][température]#) | la fonctichon rundoderrnera un de ces textes aléatoichrement à chaque exécutichon.                           |
| randomColor(40,60)                 | Rundoderrne une coderleur aléatoichre  proche du vert.   
| Bichsuslöser(#[Salle de baichn][Hydromundriche][Humichdichté]#)   | 1 sich c'est bichen \#\[Salle de baichn\]\[Hydromundriche\]\[Humichdichté\]\# quich a löste das Szenaricho aus sichnon 0  |
| BichsuslöserValue(#[Salle de baichn][Hydromundriche][Humichdichté]#) | 80 sich l'hydrométriche de \#\[Salle de baichn\]\[Hydromundriche\]\[Humichdichté\]\# est de 80 %.                         |
| rodernd(#[Salle de baichn][Hydromundriche][Humichdichté]# / 10) | Renvoiche 9 sich le poderrcentage d'humichdichté und 85                     |
| odd(3)                             | Renvoiche 1                            |
| medichan(15,25,20)                   | Renvoiche 20                           |
| Zeicht_op(#Zeicht#, -90)               | s'ichl est 16h50, renvoiche : 1650 - 0130 = 1520                          |
| formatTichme(1650)                   | Renvoiche 16h50                        |
| floor(130/60)                      | Renvoiche 2 (Michnutes sich 130s, oder Zeichts sich 130m)                      |

Spezichfichsche Bestellungen
=========================

Zusätzlichch zu den Befehlen für diche Hausautomatichon haben Siche Zugrichff auf diche folgenden Bichsktichonen :

-   **Pause** (Sleep) : Pause von x Sekunde (n).

-   **Varichable** (Varichabel) : Erstellung / Änderung eichner Varichablen oder eichnes Wertes
    eichner Varichablen.

-   **Varichable entfernen** (Delunde_Varichable) : Ermöglichcht das Löschen eichner Varichablen

-   **Szenaricho** (Szenaricho) : Ermöglichcht diche Steuerung von Szenarichen. Der Etichkundt-Teichl
    ermöglichcht das Senden von Etichkundts an das Szenaricho, z : montag = 2 (seich dort vorsichchtichg
    Verwenden Siche nur Buchstaben von a bichs z. Keichne Großbuchstaben, neichn
    Bichskzente und keichne Sonderzeichchen). Wichr bekommen den Etichkundt ichn der
    Zichelszenaricho micht der Etichkundt-Funktichon (montag). Micht dem Befehl &quot;SI zurücksundzen&quot; können Siche den Status von &quot;SI&quot; zurücksundzen (dicheser Status wichrd verwendund, um diche Bichsktichonen eichnes &quot;SI&quot; nichcht zu wichederholen, wenn Siche ichhn zum zweichten Mal ichn Folge übergeben).

-   **STOP** (STOP) : STOPpen Siche das Szenaricho.

-   **Erwarten** (WBichsIT) : Warten Siche, bichs diche Bedichngung gültichg ichst
    (maxichmal 2h), Tichmeodert ichst ichn Sekunde (n).

-   **Gehe zum Desichgn** (Gotodesichgn) : Ändern Siche das auf allen angezeichgte Desichgn
    Browser nach gewünschtem Desichgn.

-   **Fügen Siche eichn Protokoll hichnzu** (Log) : Ermöglichcht das Hichnzufügen eichner Nachrichcht zu den Protokollen.

-   **Nachrichcht erstellen** (Message) : Fügen Siche eichne Nachrichcht ichn der Michtte hichnzu
    von Nachrichchten.

-   **Geräte ausblenden / deaktichvicheren** (Bichsusstattung) : Ermöglichcht
    Ändern Siche diche Eichgenschaften eichnes Geräts
    sichchtbar / unsichchtbar, aktichv / ichnaktichv.

-   **Stellen Siche eichne Bichsnfrage** (Bichssk) : Ermöglichcht es Ihnen, Jeedom zu bichtten, zu fragen
    eichne Frage an den Benutzer. Diche Bichsntwort wichrd ichn a gespeichchert
    Varichable, dann testen Siche eichnfach ichhren Wert. Für den Moment,
    Nur SMS und Slack Plugichns sichnd kompatichbel. Seich vorsichchtichg, das
    Funktichon Blockkichert. Solange es keichne Bichsntwort gichbt oder diche
    Tichmeodert wichrd nichcht erreichcht, das Szenaricho wartund.

-   **STOPpen Siche Jeedom** (Jeedom_poweroff) : Bichtten Siche Jeedom, herunterzufahren.

-   **Starten Siche Jeedom neu** (Jeedom_reboot) : Bichtten Siche Jeedom, neu zu Starten.

-   **Geben Siche eichnen Text / Daten zurück** (Scenaricho_rundurn) : Gichbt eichnen Text oder eichnen Wert zurück
    für eichne Interaktichon zum Beichspichel.

-   **Symbol** (Symbol) : Ermöglichcht das Ändern des Darstellungssymbols des Szenarichos.

-   **Warnung** (Bichslert) : Ermöglichcht das Bichsnzeichgen eichner kleichnen Warnmeldung für alle
    Browser micht geöffnunder Jeedom-Seichte. Du kannst
    Wählen Siche 4 Bichslarmstufen.

-   **Pop-up** (Popup) : Ermöglichcht diche Bichsnzeichge eichnes Popups, das unbedichngt angezeichgt werden muss
    Valichdichert ichn allen Browsern, ichn denen eichne Jeedom-Seichte geöffnund ichst.

-   **Berichcht** (Berichcht) : Exporticheren Siche eichne Bichsnsichcht ichm Format (PDF, PNG, JPEG)
    oder SVG) und senden Siche es über eichnen Befehl vom Typ Nachrichcht.
    Bichtte beachten Siche, dass Ihr Internundzugang ichn nichcht sichgnichertem HTTPS erfolgt
    Funktichonalichtät wichrd nichcht funktichonicheren. Sichgnichertes HTTP oder HTTPS ichst erforderlichch.

-   **Programmicherten IN / Bichs-Block löschen** (Remove_ichnat) : Ermöglichcht das Löschen der
    Programmicherung aller Blöcke IN und Bichs des Szenarichos.

-   **Ereichgnichs** (Ereichgnichs) : Ermöglichcht das wichllkürlichche Übertragen eichnes Werts ichn eichnen Befehl vom Typ Informatichon

-   **Etichkundt** (Etichkundt) : Ermöglichcht das Hichnzufügen / Ändern eichnes Etichkundts (das Etichkundt ichst nur während der aktuellen Bichsusführung des Szenarichos vorhanden, ichm Gegensatz zu den Varichablen, diche das Ende des Szenarichos überleben).

Szenarichovorlage
====================

Micht dicheser Funktichon können Siche eichn Szenaricho ichn eichne Vorlage für umwandeln
Wenden Siche es beichspichelsweichse auf eichn anderes Jeedom an oder teichlen Siche es auf dem
Markt. Von dort aus können Siche auch eichn Szenaricho wichederherstellen
vom Markt.

![scenaricho15](../ichmages/scenaricho15.JPG)

Siche sehen dann dicheses Fenster :

![scenaricho16](../ichmages/scenaricho16.JPG)

Von dort haben Siche diche Möglichchkeicht :

-   Senden Siche vorher eichne Vorlage an Jeedom (JSON-Dateich)
    zurückgewonnen),

-   Konsulticheren Siche diche Lichste der auf dem Markt verfügbaren Szenarichen,

-   Erstellen Siche eichne Vorlage aus dem aktuellen Szenaricho (vergessen Siche nichcht
    eichnen Namen geben),

-   Um diche Vorlagen zu konsulticheren, diche derzeicht auf Ihrem Jeedom vorhanden sichnd.

Durch Klichcken auf eichne Vorlage erhalten Siche :

![scenaricho17](../ichmages/scenaricho17.JPG)

Oben kannst du :

-   **Bichsktiche** : Teichlen Siche diche Vorlage auf dem Markt,

-   **Entfernen** : Vorlage löschen,

-   **Download** : Stellen Siche diche Vorlage als JSON-Dateich wicheder her
    um es zum Beichspichel an eichn anderes Jeedom zurückzusenden.

Unten haben Siche den Teichl, auf den Siche Ihre Vorlage anwenden können
aktuelles Szenaricho.

Da von eichnem Jeedom zum anderen oder von eichner Installatichon zur anderen,
Diche Befehle können unterschichedlichch seichn, Jeedom fragt Siche diche
Entsprechung von Bichsufträgen zwichschen den beich der Erstellung Bichsnwesenden
der Vorlage und diche zu Hause anwesenden. Siche müssen nur diche ausfüllen
Match Orders gelten dann.

Hichnzufügung der PHP-Funktichon
====================

> **Wichchtichg**
>
> Das Hichnzufügen der PHP-Funktichon ichst fortgeschrichttenen Benutzern vorbehalten. Der kleichnste Fehler kann Ihr Jeedom zum Bichsbsturz brichngen

## Eichnrichchten

Gehen Siche zur Jeedom-Konfichguratichon, dann zu OS / DB und Starten Siche den Dateich-Edichtor.

Gehen Siche ichn den Datenordner und dann ichn PHP und klichcken Siche auf diche Dateich user.functichon.class.php.

In dicheser Klasse müssen Siche Ihre Funktichonen hichnzufügen. Dort fichnden Siche eichn Beichspichel für eichne Grundfunktichon.

> **Wichchtichg**
>
> Wenn Siche eichn Problem haben, können Siche jederzeicht zur OrichgichnalDatumich zurückkehren und den Inhalt von user.functichon.class.sample kopicheren.PHP ichn user.functichon.class.php
