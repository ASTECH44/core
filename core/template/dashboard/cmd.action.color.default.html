<div class="cmd cmd-widget" data-type="action" data-subtype="color" data-cmd_id="#id#" data-cmd_uid="#uid#" data-version="#version#" style="width: 146px;height: 34px;">
    <div class="input-group input-group-sm" style="width: 100%">
        <input class="action_colorpicker_change form-control cursor" type="color">
        <span class="input-group-btn">
            <a class="btn btn-default action_colorpicker_off" style="background-color:#cmdColor# !important;border-color : transparent !important;">Off</a>
        </span>
    </div>
    <script>
        $('.cmd[data-cmd_uid=#uid#]:last .action_colorpicker_change').value(('#state#' != '') ? '#state#'.substr(0,7) : '#000000');
        $('.cmd[data-cmd_uid=#uid#]:last .action_colorpicker_off').on('click', function() {
            $('.cmd[data-cmd_uid=#uid#]:last .action_colorpicker_change').value('#000000');
        });
        $('.cmd[data-cmd_uid=#uid#]:last .action_colorpicker_change').on('change', function() {
            jeedom.cmd.execute({id: '#id#', value: {color: $(this).value()}});
        });
    </script>
</div>